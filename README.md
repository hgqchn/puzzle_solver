思路1：
任务目标：拍摄多张碎片的照片，与完整图像进行匹配，获取每个碎片在完整图像中的位置

输入：完整图像O，包含多个拼图碎片的图像A
输出：每个拼图碎片在完整图像的位置

大概流程：
对图像A进行处理，提取每个拼图碎片，并标记其包围框
循环处理每个拼图碎片，在O中寻找位置
在A中标记每个拼图碎片在O中的位置
上述流程难以实现，原因是完整图像分辨率过低，拼图碎片纹理接近，对于扫描要求较高

思路2：
任务目标：拍摄全部拼图碎片背面的照片，根据形状进行匹配

输入：包含拼图碎片的图像A
输出：每个拼图碎片对应图像P_i及其id，可视化显示拼接成功的大图及每个拼图碎片的id

流程：
1.拼图碎片扫描：在深色背景下，对包含n个的拼图碎片背面（白色）进行拍照，获取一系列图像{A_j}。拍照时，固定相机位置，固定拼图所在深色背景平面与相机距离，深色背景平面与相机光轴垂直。
2.图像预处理，获取拼图碎片的图像
读取每个图像A_j，转为灰度，滤波和二值化等预处理，得到二值化的图像，其中拼图碎片区域值为255，背景值为0
对于二值化图像，提取轮廓，轮廓数量需与拼图碎片数量一致，若不一致，需要重新设定二值化阈值
计算每个轮廓的包围盒，包围盒略微向四周扩大，根据包围盒，提取出每个拼图碎片对应的二值化图像，创建拼图碎片对象，传入该图像，赋予对象id
3.拼图碎片图像处理
	对于每个拼图碎片的二值化图像，初步提取角点，根据四点围成面积最大和四点围成形状最接近矩形，获取拼图碎片的四个角点。取最左侧的两个角点，旋转图像，使两个角点连接线与水平轴垂直。对四个角点按照从x坐标，y坐标最小的点（左上方点）开始，按顺时针顺序进行排序，按照此顺序围成的形状是凸的，便于后续处理
	提取旋转后的二值化图像的边缘，根据上一步获取的四个角点，提取拼图碎片的四个边。具体计算流程为，遍历边缘的全部点，计算每个点与角点的距离，根据一条边上的点距离这条边两角点的距离最小，得到每个边对应的点，每个边对应的二值化图像
	根据四个角点坐标，计算拼图碎片中心点的坐标c（角点坐标求平均值），对于每个边的点，求其平均坐标e，求每个边两角点的平均坐标line_c，计算e与c的距离，计算line_c与c的距离，若前者大于后者，则该条边为凸的，反之为凹的。标记每条边的类型，从而可标记出拼图碎片的类型
	由于处理时间较长，所以需要对拼图碎片对象序列化保存，重点为保存其旋转后的二值化图像，四个角点（4,1,2），四条边对应的点（N,1,2）
4.开始拼接
	a.将碎片对象分类为：1凸3凹，2凸2凹，3凸1凹，4凸，4凹
b.遍历碎片对象，根据上述分类，可做初步过滤。对于两个碎片图像，按照凸边凹边，进行拼接尝试，可能的类型组合及最多尝试次数为
1凸3凹，1凸3凹，至多6次
1凸3凹，2凸2凹，至多8次
1凸3凹，3凸1凹，至多10次
1凸3凹，4凸，至多12次
1凸3凹，4凹，至多4次
2凸2凹，3凸1凹，至多8次
2凸2凹，4凸，至多8次
2凸2凹，4凹，至多8次
3凸1凹，4凸，至多4次
3凸1凹，4凹，至多4次
4凸，4凹，至多16次
对于每次拼接，平均尝试次数为8次
c.凸边凹边具体拼接流程
对于两张碎片图像，根据边对应的二值化图像，得到其包围盒，将该包围盒范围略微扩大。两张碎片图像其中一张图像取反。计算两张碎片图像在包围盒区域的特征点（orb特征计算等），进行特征匹配，可手动增加边的角点作为匹配点（注意角点匹配关系），根据匹配的特征点，若匹配特征点数量过少，则认为这两边不匹配；计算碎片图像A到B的仿射变换矩阵若仿射变换矩阵中的平移部分参数为负，构建新的平移矩阵，其参数为负值取反，并将仿射变换矩阵中的平移参数置为0，对A进行仿射变换，并将B图像对应区域设置值为255，得到拼接图像C；评估拼接质量：1.计算变换后A图像对应的面积+B图像对应的面积，与图像C面积进行求差，差值越小越好，为0说明未重叠，2.计算变换后，对应的匹配特征点的距离和，和越小越好。根据这两个指标，确定哪两条边是最匹配的，记录结果。
